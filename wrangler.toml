name = "geo-verification"
main = "src/index.ts"
compatibility_date = "2024-11-01"

[durable_objects]
bindings = [
  { name = "VERIFICATION_MANAGER", class_name = "VerificationManager" },
  { name = "USER_RATE_LIMITER", class_name = "UserRateLimiter" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["VerificationManager", "UserRateLimiter"]

[vars]
CODE_EXPIRY_MINUTES = "5"
RATE_LIMIT_PER_HOUR = "3"
ALLOWED_CALLBACK_HOSTS = "localhost,127.0.0.1"

# Secrets (set via `wrangler secret put`):
# - GEOGUESSR_NCFA_TOKEN (required)
# - API_KEY (optional, if not set API is open)
